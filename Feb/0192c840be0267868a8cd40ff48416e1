At the beginning of “Knock at the Cabin,” M. Night Shyamalan’s latest frenzied flirtation with the apocalypse, 8-year-old Wen (Kristen Cui) comes face-to-face with a gentle giant of a man named Leonard (Dave Bautista). She’s catching grasshoppers in the woods; he helps her out, deftly trapping one insect and slipping it into her jar, taking care not to frighten the ones already captured within. It’s a sly metaphor for the delicately orchestrated home invasion that’s about to unfold at the lakeside cabin where Wen has come to stay with her parents, Andrew (Ben Aldridge) and Eric (Jonathan Groff), for what’s looking like a less idyllic vacation than they’d anticipated. Those unsuspecting grasshoppers could also be an indirect nod to Shyamalan himself, given his long-standing fondness for trapping his characters under glass. Again and again throughout his erratic, sometimes risible and seldom uninteresting career, he has locked his characters away in hermetic puzzle-box environments, governed by rules that don’t always announce themselves until the final scenes. Even in his doomsday thrillers, like “Signs” and “The Happening,” the threat of global annihilation tends to play out in close, self-contained quarters. The fate of the world takes a backseat to the more intimate stakes of a family’s survival. The novelty of “Knock at the Cabin” — a swift-moving piece of Judgment Day genre hokum adapted from Paul G. Tremblay’s novel “The Cabin at the End of the World” — is that it pits the world and the family directly against each other. Leonard, despite his clearly unfeigned kindness, turns out to be the bearer of less-than-benevolent tidings. Before long he and three companions — their names are Redmond (Rupert Grint), Adriane (Abby Quinn) and Sabrina (an affecting Nikki Amuka-Bird) — have taken sharp, scythe-like  tools in hand and forced their way into the cabin. Amid the initial shock and confusion, the din of raised voices and the inevitability of violence, a cruel ultimatum is delivered: The world will soon perish in fire and water and pestilence, and in order to save humanity, Andrew, Eric and Wen must make the ultimate sacrifice. One of them must die, and the other two must be the ones to carry it out. Such wild demands, even when delivered in Leonard’s patient, pleading, I-know-how-ridiculous-this-sounds tones, can’t help but spur Andrew, Eric and Wen toward their own remarkably sane, practical-minded questions: Who are these lunatics and what not-so-funny games are they up to? Can Andrew break free and grab the gun he has stored in the car, or are they too badly outnumbered? Are he and Eric being targeted because of their identities, as the gay parents of an adopted Chinese-born daughter? A few carefully doled-out flashbacks to the early days of their relationship, including a vicious attack in a bar, establish the atmosphere of pervasive, free-floating homophobia from which they and Wen have managed, until now, to take refuge. But Leonard takes pains to assure Andrew and Eric that their sexuality has nothing to do with why they were “chosen,” and at its deftest moments, “Knock at the Cabin” almost convinces you that it shares Leonard’s indifference. The best thing about the movie is surely its casual foregrounding of two gay parents in a way that feels significant yet unfussy, empathetic yet matter-of-fact. Aldridge and Groff are especially good at showing complementary angles of a couple — Eric the instinctive peacemaker, Andrew the impulsive, fiercely protective hothead — who are clearly stronger for their differences of personality, and united by their unwavering love for their child.  We know instinctively who these characters are, and we long for them to survive. Almost exactly the opposite could be said of the intruders, and while the performances have their flashes of warmth and complexity — Bautista, perfectly cast here as a bespectacled, heavily tattooed teddy bear, has seldom been more earnestly affecting — the extremity of their beliefs naturally leads the audience into a realm of outlandish, blatantly allegorical speculation. Could these four intruders, often framed in extreme, unnerving closeup, be messengers foretold in the Book of Revelation? And if they are, does that make Andrew, Eric and Wen some secular earthbound version of the Holy Trinity, forced to sacrifice one of their number for the salvation of humanity? Two handsome young men and their button-cute kid may not resemble anyone’s idea of divinity. But in carefully refusing to inflict physical harm on Andrew, Eric and Wen, the intruders treat their prisoners with an eerie, worshipful reverence. Their fanatical conviction is easy to mock, but also hard not to take seriously. You could say something similar about the confidence that Shyamalan displays in Tremblay’s material, as well as in his own formal powers of persuasion. While there are a few snippets of outsized spectacle — visions of falling planes and crashing tidal waves, most of them filtered through a TV news camera darkly — “Knock at the Cabin” is first and foremost an exercise in confinement, one that derives its claustrophobic power from the fluid interplay of Jarin Blaschke and Lowell A. Meyer’s meticulously composed widescreen images, Noëmi Preiswerk’s taut, fluid editing and the menacing notes of Herdís Stefánsdóttir’s score. Like the director’s previous thriller, the graphic-novel adaptation “Old,” “Knock at the Cabin” suggests that Shyamalan, a filmmaker once hailed for his originality, has grown better at identifying his favorite themes and obsessions in stories other than his own. Despite the startling left turns that he and his co-writers Steve Desmond and Michael Sherman have folded into Tremblay’s narrative, it’s refreshing to see Shyamalan find himself, and at least partially subsume his ego, in someone else’s material. He tells a slim, scaled-down story that feels entirely (maybe even too much) in his B-movie wheelhouse, a story about the horror of the unknown, the power of suggestion and the importance of faith.  Faith has always been a big deal for Shyamalan, and like many of his earlier movies, “Knock at the Cabin” gestures earnestly at higher powers and deeper meanings. That’s its fascination and also, the more it goes on, its limitation. As the stakes escalate and the terrors multiply for Andrew, Eric and Wen, the story seems to constrict and retreat into itself; we are not inhabiting a tense, live-wire scenario so much as a series of airless, meticulously plotted moves. What plays at first like a suspenseful guessing game slowly flattens out, shedding its layers of implication and mystery to become a gruelingly obvious pseudo-philosophical parlor trick. The more you realize where Shyamalan is leading us — and by this point, it’s not exactly a surprise destination — the more difficult it becomes to locate a worthwhile point. Perhaps the point is in the impressive discipline of the filmmaking, though if anything, given its premise, the movie wants to be a grislier, more nastily unhinged piece of work than it manages. Terribly violent things do happen in “Knock at the Cabin,” but Shyamalan rarely gives them their proper visceral weight. Even his insistence on framing the bloodiest moments just off-camera feels less like a triumph of restraint than a failure of nerve. I say all this as a longtime Shyamalan agnostic, or perhaps something of an appreciative skeptic. Over the years, through various ups and downs, setbacks and rebounds, his idiosyncratic mix of genius and hackery has become a reliably unreliable fixture of the mainstream movie landscape — a source of amusement, intentional and otherwise, and occasionally of honest surprise and excitement. It’s not hard to keep rooting for him or his enormously sympathetic trio of protagonists here, even if the conditions of their brutal and increasingly bizarre endurance test ultimately defy belief.      