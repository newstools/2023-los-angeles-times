A suicide bomber detonated explosives during crowded prayers at a mosque inside a police compound in Pakistan on Monday, causing the roof to cave in. At least 47 people were killed and 150 wounded, officials said. Most of the casualties were police officers. It was not clear how the bomber was able to slip into the walled compound, which houses the northwestern city of Peshawar’s police headquarters and is itself inside a high-security zone with other government buildings. Sarbakaf Mohmand, a commander for the Pakistani Taliban, claimed responsibility on Twitter for the attack. The main spokesman for the militant group was not immediately available for comment. Pakistan, which is mostly Sunni Muslim, has seen a surge in militant attacks since November, when the Pakistani Taliban ended their cease-fire with government forces. Monday’s assault on a Sunni mosque was one of the deadliest attacks on security forces in recent years. The militant group, also known as Tehreek-e-Taliban Pakistan, or TTP, has waged an insurgency in Pakistan over the last 15 years, fighting for stricter enforcement of Islamic laws, the release of members in government custody and a reduction of the Pakistani military presence in areas of Khyber Pakhtunkhwa province, which it has longed used as its base. More than 300 worshipers were praying inside the mosque, with more approaching, when the bomber set off his explosives vest. Many were injured when the roof came down, according to Zafar Khan, a local police officer. Rescuers scrambled to remove mounds of debris from the mosque grounds to reach worshipers still trapped under the rubble.   Meena Gul, who was inside the mosque when the bomb went off, said he doesn’t know how he survived unhurt. The 38-year-old police officer said he could hear cries and screams after the bomb exploded. Siddique Khan, a police official, said the death toll had risen to 47, and more than 150 people were wounded.  He said the attacker blew himself up while among the worshipers.  A nearby hospital listed many of the wounded in critical condition, raising concerns that the death toll could still rise further. Senior police and government officials attended the funerals of 30 police officers, and arrangements to bury the rest were being made. Coffins were wrapped in the Pakistani flag, and the officers’ bodies were later handed over to relatives for burial. Peshawar is the capital of Khyber Pakhtunkhwa province, where the Pakistani Taliban have a strong presence, and the city has been the scene of frequent militant attacks. The group is separate from but a close ally of the Afghan Taliban, which seized power in Afghanistan in August 2021 as U.S. and NATO troops were in the final stages of their pullout from the country after 20 years of war. The truce ended as Pakistan was still contending with last summer’s unprecedented flooding, which killed 1,739 people, destroyed more than 2 million homes and at one point submerged as much as one-third of the country. The flood damage totaled more than $30 billion, and authorities are now, months later, still struggling to arrange tents, shelter and food for the survivors. Mohmand, the Pakistani Taliban commander, said a fighter carried out the attack to avenge the killing of Abdul Wali, who was widely known as Omar Khalid Khurasani, and was killed in neighboring Afghanistan’s Paktika province in August.   Prime Minister Shahbaz Sharif condemned the bombing and vowed “stern action” against those who were behind the attack. Sharif traveled to Peshawar and visited the wounded at the hospital. His office said he would receive a briefing about the security situation in the northwest. Former Prime Minister Imran Khan called the bombing a “terrorist suicide attack” in a Twitter post. “It is imperative we improve our intelligence gathering & properly equip our police forces to combat the growing threat of terrorism,” Khan tweeted. Cash-strapped Pakistan is facing a severe economic crisis and is seeking a crucial installment of $1.1 billion from the International Monetary Fund — part of its $6-billion bailout package — to avoid default. Talks with the IMF on reviving the bailout have stalled.  Sharif’s government came to power last April after Imran Khan was ousted in a no-confidence vote in parliament. Khan has since campaigned for early elections, claiming his ouster was illegal and part of a plot backed by the U.S. Washington and Sharif have dismissed Khan’s claims.